<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Investors — MG Capital CRM</title>
  <style>
    :root{ --bg:#0a0b10;--card:#121320;--muted:#8b90a5;--text:#eef1ff;--accent:#6e7bff;--accent-2:#45d1c4;--danger:#ff6b6b;--success:#32d49e;--warning:#ffcc66; --ring:0 0 0 2px color-mix(in oklab, var(--accent), transparent 60%); --radius:18px; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,-apple-system,Segoe UI,Roboto,Inter,system-ui;background:
      radial-gradient(1000px 600px at -10% -10%, #2b2e74 0%, transparent 60%),
      radial-gradient(900px 600px at 110% 10%, #0d5b64 0%, transparent 60%),
      linear-gradient(180deg,#0a0b10,#0a0b10); color:var(--text)}
    .container{width:80%;max-width:1400px;margin-inline:auto;padding:28px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:24px}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2)); display:grid;place-items:center;font-weight:800;color:#fff;box-shadow:0 8px 30px #0008}
    h1{font-size:clamp(18px,3vw,24px);margin:0}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap}
    .btn{padding:10px 14px;border-radius:12px;border:1px solid #ffffff1a;background:#ffffff10;color:var(--text);cursor:pointer; transition:.2s;backdrop-filter:blur(6px);text-decoration:none;display:inline-block;text-align:center}
    .btn:hover{transform:translateY(-1px);background:#ffffff1a}
    .btn.primary{background:linear-gradient(135deg,var(--accent),#4b56f7);border-color:#0000;box-shadow:0 6px 24px #6e7bff33}
    .btn.ghost{background:#ffffff08}

    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{background:linear-gradient(180deg,#101123,#0c0d18);border:1px solid #ffffff10;border-radius:var(--radius);padding:18px;box-shadow:0 10px 30px #0006}
    .metric{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;gap:6px;padding:20px 18px;transition:transform .2s,box-shadow .2s}
    .card:hover .metric{transform:translateY(-4px);box-shadow:0 12px 28px rgba(110,123,255,.25)}
    .metric h3{margin:0;color:#cfd6ff;font-weight:600;font-size:18px}
    .metric .value{font-size:34px;font-weight:800;margin-bottom:6px}
    .muted{color:var(--muted)}
    .pill{align-self:flex-start;margin-top:auto;font-size:13px;padding:6px 10px;border-radius:999px;background:#ffffff0f;border:1px solid #ffffff1a;white-space:nowrap}

    .split{display:flex;gap:12px;flex-wrap:wrap}
    input,select,textarea{background:#0e1020;border:1px solid #ffffff1a;border-radius:12px;padding:10px 12px;color:var(--text);outline:none}
    input:focus,select:focus,textarea:focus{box-shadow:var(--ring);border-color:#6e7bff80}

    table{width:100%;border-collapse:separate;border-spacing:0 10px}
    thead th{font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:#b4b8d6;text-align:left;padding:0 12px}
    tbody tr{background:#0e1020;border:1px solid #ffffff14}
    tbody tr td{padding:12px}
    tbody tr{border-radius:14px;overflow:hidden}
    tbody tr td:first-child{border-top-left-radius:14px;border-bottom-left-radius:14px}
    tbody tr td:last-child{border-top-right-radius:14px;border-bottom-right-radius:14px}

    .stage{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid #ffffff1a}
    .s-Lead{background:#ffffff06}
    .s-Contacted{background:#2a35600f;border-color:#2a356044}
    .s-NDA{background:#2b5b3515;border-color:#2b5b3544}
    .s-Diligence{background:#5b3c2215;border-color:#5b3c2244}
    .s-Committed{background:#1e4d3a30;border-color:#1e4d3a66}
    .s-Declined{background:#5b222230;border-color:#5b222266}

    .right{margin-left:auto}

    .board{display:grid;grid-template-columns:repeat(5,1fr);gap:14px}
    .column{min-height:300px;background:#0e1020;border:1px solid #ffffff14;border-radius:16px;padding:12px}
    .col-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .card-mini{background:#11142a;border:1px solid #ffffff12;border-radius:14px;padding:10px;margin-bottom:10px}

    .progress{height:12px;background:#ffffff14;border-radius:999px;overflow:hidden}
    .progress>div{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width .8s ease}

    footer{opacity:.7;margin-top:28px;font-size:12px}

    dialog{border:1px solid #ffffff2a;background:#0e1020;color:var(--text);border-radius:16px;padding:0;width:min(720px,92vw)}
    dialog::backdrop{background:#0008}
    .modal-head{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid #ffffff1a}
    .modal-body{padding:16px 18px;display:grid;gap:12px}
    .modal-actions{display:flex;justify-content:flex-end;gap:10px;padding:14px 18px;border-top:1px solid #ffffff1a}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:12px}

    .tabs{display:flex;gap:8px;margin-top:12px}
    .tab{padding:8px 12px;border-radius:999px;border:1px solid #ffffff1a;background:#ffffff08;cursor:pointer}
    .tab.active{background:linear-gradient(135deg,var(--accent),#4b56f7);border-color:#0000}

    .hidden{display:none}
    .nowrap{white-space:nowrap}

    #tableView{overflow-x:auto;-webkit-overflow-scrolling:touch}
    #tableView > table{min-width:980px}
    @media (max-width:1024px){.board{grid-template-columns:1fr 1fr}.grid{grid-template-columns:1fr}.container{width:95%;max-width:95%}}
    @media (max-width:720px){header{flex-direction:column;align-items:flex-start}.board{grid-template-columns:1fr}.two{grid-template-columns:1fr}#tableView>table{min-width:720px}}
  </style>
</head>
<body>
  <!-- Auth guard disabled in canvas so you can preview directly -->

  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">MG</div>
        <div><h1>Investor & Project Pipeline</h1></div>
      </div>
      <div class="toolbar">
        <a href="investors.html" class="btn primary">Investors</a>
        <a href="projects.html" class="btn ghost">Projects</a>
      </div>
      <div class="toolbar">
        <button class="btn primary" id="addBtn">+ Add Investor</button>
        <button class="btn ghost" id="exportBtn">Export Investors</button>
        <button class="btn ghost" id="importBtn">Import Investors</button>
        <button class="btn" id="backupBtn" title="Save a browser backup">Backup Now</button>
        <button class="btn" id="restoreBtn" title="Restore last browser backup">Restore Backup</button>
        <button class="btn" id="toggleViewBtn" title="Toggle Investor Table/Kanban">Toggle View</button>
      </div>
    </header>

    <section class="grid" style="grid-template-columns:repeat(12,1fr)">
      <div class="card" style="grid-column:span 3">
        <div class="metric"><div><h3>Investors</h3><div class="value" id="mCount">0</div></div><span class="pill" id="mLeads">0 leads</span></div>
        <div class="muted">Total records in your CRM.</div>
      </div>
      <div class="card" style="grid-column:span 3">
        <div class="metric"><div><h3>Total Capital Interest</h3><div class="value" id="mInterest">$0</div></div><span class="pill" id="avgInterest">avg $0</span></div>
        <div class="progress" aria-hidden="true"><div id="pi1" style="width:0%"></div></div>
        <div class="muted">Sum of all expressed interest.</div>
      </div>
      <div class="card" style="grid-column:span 3">
        <div class="metric"><div><h3>Total Available Capital</h3><div class="value" id="mAvailable">$0</div></div><span class="pill" id="coverage">coverage 0%</span></div>
        <div class="progress" aria-hidden="true"><div id="pi2" style="width:0%"></div></div>
        <div class="muted">Sum of verified available capital.</div>
      </div>
      <div class="card" style="grid-column:span 3">
        <div class="metric"><div><h3>Weighted Pipeline</h3><div class="value" id="mWeighted">$0</div></div><span class="pill">probability-adjusted</span></div>
        <div class="muted">Interest × stage probability.</div>
      </div>
    </section>

    <section class="card" style="margin-top:16px">
      <div class="split">
        <strong>Investors</strong>
        <span class="right"></span>
        <input id="q" placeholder="Search investors…" style="min-width:260px" />
        <select id="stageFilter"><option value="">All stages</option><option>Lead</option><option>Contacted</option><option>NDA</option><option>Diligence</option><option>Committed</option><option>Declined</option></select>
        <select id="sorter"><option value="-updated">Sort: Recently updated</option><option value="name">Sort: Name A→Z</option><option value="-interest">Interest high→low</option><option value="-available">Available high→low</option><option value="stage">Stage</option></select>
        <div class="tabs"><button class="tab active" data-view="table">Table</button><button class="tab" data-view="board">Board</button></div>
      </div>

      <div id="tableView" style="margin-top:12px">
        <table>
          <thead><tr><th>Name</th><th>Company</th><th>City/State</th><th class="nowrap">Stage</th><th class="nowrap">Interest</th><th class="nowrap">Available</th><th class="nowrap">Fit</th><th class="nowrap">Next Action</th><th></th></tr></thead>
          <tbody id="rows"></tbody>
        </table>
      </div>

      <div id="boardView" class="board hidden" style="margin-top:12px"></div>
    </section>

    <footer>Data is saved locally in your browser. Export CSV for backups. — MG Capital</footer>
  </div>

  <dialog id="modal"><form method="dialog">
    <div class="modal-head"><strong id="modalTitle">Add Investor</strong><button class="btn" value="close">✕</button></div>
    <div class="modal-body">
      <div class="two"><label>Full Name<br/><input id="f_name" required /></label><label>Company<br/><input id="f_company" /></label></div>
      <div class="two"><label>Email<br/><input id="f_email" type="email" placeholder="name@domain.com" /></label><label>Phone<br/><input id="f_phone" placeholder="+1 (555)" /></label></div>
      <div class="two"><label>City<br/><input id="f_city" placeholder="City"/></label><label>State<br/><input id="f_state" placeholder="State"/></label></div>
      <div class="two"><label>Stage<br/>
        <select id="f_stage"><option>Lead</option><option>Contacted</option><option>NDA</option><option>Diligence</option><option>Committed</option><option>Declined</option></select>
      </label><label>Fit Score (0–100)<br/><input id="f_fit" type="number" min="0" max="100" value="60"/></label></div>
      <div class="two"><label>Capital Interest (USD)<br/><input id="f_interest" type="number" min="0" step="1000" value="0"/></label><label>Available Capital (USD)<br/><input id="f_available" type="number" min="0" step="1000" value="0"/></label></div>
      <div class="two"><label>Next Action<br/><input id="f_next" placeholder="e.g., Send NDA"/></label><label>Due Date<br/><input id="f_due" type="date"/></label></div>
      <label>Tags (comma-separated)<br/><input id="f_tags" placeholder="HNW, real estate, family office"/></label>
      <label>Notes<br/><textarea id="f_notes" rows="4" placeholder="Context, objections, interests…"></textarea></label>
      <input id="f_id" type="hidden" />
    </div>
    <div class="modal-actions"><button class="btn" value="close">Cancel</button><button class="btn primary" id="saveBtn" value="default">Save</button></div>
  </form></dialog>

  <dialog id="confirmDlg"><form method="dialog">
    <div class="modal-head"><strong>Confirm delete</strong><button class="btn" value="close">✕</button></div>
    <div class="modal-body"><div>Are you sure you want to delete this record?</div></div>
    <div class="modal-actions"><button class="btn" value="close">Cancel</button><button class="btn primary" id="confirmYes" value="default">Delete</button></div>
  </form></dialog>

  <input type="file" id="filePicker" accept=".csv" style="display:none" />

  <script>
    // ---- Probabilities for weighted pipeline ----
    const STAGES=["Lead","Contacted","NDA","Diligence","Committed","Declined"];
    const PROB={Lead:.1,Contacted:.2,NDA:.35,Diligence:.6,Committed:.95,Declined:0};

    // ---- Helpers ----
    function uid(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}
    function currency(n){n=Number(n||0);return n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0})}
    function csvCell(v){const s=String(v??'');return /[",\n]/.test(s)?'"'+s.replace(/"/g,'""')+'"':s}
    function splitCSV(line){const out=[];let cur='';let inQ=false;for(let i=0;i<line.length;i++){const ch=line[i];if(ch==='"'){if(inQ&&line[i+1]==='"'){cur+='"';i++;}else inQ=!inQ;}else if(ch===','&&!inQ){out.push(cur);cur='';}else cur+=ch;}out.push(cur);return out}
    function escapeHTML(s=''){return s.replace(/[&<>"']/g,c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[c]))}

    // ---- Storage migration to stable key ----
    (function migrate(){try{const NEW='mgcrm_investors',OLD='investorCRM';if(!localStorage.getItem(NEW)){const legacy=localStorage.getItem(OLD);if(legacy){localStorage.setItem(NEW,legacy);}}}catch{}})();

    function loadInvestors(){try{return JSON.parse(localStorage.getItem('mgcrm_investors')||'[]')}catch{return[]}}
    function saveInvestors(){const K='mgcrm_investors';localStorage.setItem(K+'_backup',localStorage.getItem(K)||'[]');localStorage.setItem(K,JSON.stringify(db));renderInvestors()}

    // ---- Data ----
    let db = loadInvestors();

    // ---- Rendering ----
    const rowsEl=document.getElementById('rows');
    const boardEl=document.getElementById('boardView');

    function renderInvestors(){
      const q=(document.getElementById('q')?.value||'').toLowerCase();
      const stageSel=document.getElementById('stageFilter')?.value||'';
      const sorter=document.getElementById('sorter')?.value||'-updated';
      let items=db.filter(x=>{const hay=[x.name,x.company,x.tags,x.city,x.state].join(' ').toLowerCase();return(!q||hay.includes(q))&&(!stageSel||x.stage===stageSel)});
      items.sort((a,b)=>{switch(sorter){case 'name':return(a.name||'').localeCompare(b.name||'');case '-interest':return(b.interest||0)-(a.interest||0);case '-available':return(b.available||0)-(a.available||0);case 'stage':return STAGES.indexOf(a.stage)-STAGES.indexOf(b.stage);default:return(b.updated||0)-(a.updated||0)}});
      rowsEl.innerHTML=items.map(rowHTML).join('');
      boardEl.innerHTML=STAGES.filter(s=>s!=='Declined').map(stage=>{const list=items.filter(x=>x.stage===stage);const total=list.reduce((t,x)=>t+(x.interest||0),0);return`<div class="column" data-stage="${stage}"><div class="col-head"><strong>${stage}</strong><span class="pill">${list.length} • ${currency(total)}</span></div>${list.map(cardHTML).join('')}</div>`}).join('');
      const count=db.length;const leads=db.filter(x=>x.stage==='Lead').length;const sumInterest=db.reduce((t,x)=>t+(+x.interest||0),0);const sumAvail=db.reduce((t,x)=>t+(+x.available||0),0);const weighted=db.reduce((t,x)=>t+((+x.interest||0)*(PROB[x.stage]||0)),0);
      mCount.textContent=count;mLeads.textContent=`${leads} leads`;mInterest.textContent=currency(sumInterest);mAvailable.textContent=currency(sumAvail);mWeighted.textContent=currency(weighted);avgInterest.textContent=count?`avg ${currency(sumInterest/count)}`:'avg $0';const cov=sumInterest?Math.round(sumAvail/sumInterest*100):0;document.getElementById('coverage').textContent=`coverage ${cov}%`;pi1.style.width=`${Math.min(100,cov)}%`;pi2.style.width=`${Math.min(100,Math.round((weighted/(sumInterest||1))*100))}%`;
    }

    function rowHTML(x){const cityState=[x.city||'',x.state||''].filter(Boolean).join(', ');return`<tr><td><strong>${escapeHTML(x.name)}</strong><div class="muted" style="font-size:12px">${escapeHTML(x.email||'')}${x.email&&x.phone?' • ':''}${escapeHTML(x.phone||'')}</div></td><td>${escapeHTML(x.company||'')}</td><td>${escapeHTML(cityState)}</td><td><span class="stage s-${x.stage.replace(' ','')}">${x.stage}</span></td><td class="nowrap">${currency(x.interest)}</td><td class="nowrap">${currency(x.available)}</td><td>${x.fit??''}</td><td>${escapeHTML(x.next||'')}${x.due?` <span class="muted">(${x.due})</span>`:''}</td><td class="nowrap" style="text-align:right"><button class="btn ghost" type="button" onclick='openEdit("${x.id}")'>Edit</button><button class="btn" type="button" onclick='quickAdvance("${x.id}")'>Advance ▶</button><button class="btn" type="button" onclick='confirmDel("${x.id}","investor")' style="border-color:#ff6b6b66">Delete</button></td></tr>`}

    function cardHTML(x){const gap=(x.interest||0)-(x.available||0);const pct=Math.max(0,Math.min(100,Math.round(((x.available||0)/(x.interest||1))*100)));const cityState=[x.city||'',x.state||''].filter(Boolean).join(', ');return`<div class="card-mini"><div style="display:flex;justify-content:space-between;gap:8px;align-items:center"><div><strong>${escapeHTML(x.name)}</strong><div class="muted" style="font-size:12px">${escapeHTML(x.company||'')}${cityState?` • ${escapeHTML(cityState)}`:''}</div></div><button class="btn" type="button" onclick='openEdit("${x.id}")'>Edit</button></div><div class="split" style="margin-top:8px"><span class="pill">${currency(x.interest)} interest</span><span class="pill">${currency(x.available)} available</span><span class="pill" title="Coverage">${pct}% cov</span></div><div class="progress" style="margin-top:8px"><div style="width:${pct}%"></div></div><div class="muted" style="margin-top:6px;font-size:12px">Gap: ${currency(gap)} • Next: ${escapeHTML(x.next||'—')}</div></div>`}

    // ---- CRUD ----
    document.getElementById('addBtn').addEventListener('click',()=>openEdit());
    function openEdit(id){const m=document.getElementById('modal');const item=db.find(x=>x.id===id)||{id:"",name:"",company:"",email:"",phone:"",city:"",state:"",stage:"Lead",fit:60,interest:0,available:0,next:"",due:"",tags:"",notes:""};document.getElementById('modalTitle').textContent=item.id?'Edit Investor':'Add Investor';document.getElementById('f_id').value=item.id;f_name.value=item.name;f_company.value=item.company;f_email.value=item.email;f_phone.value=item.phone;f_city.value=item.city||'';f_state.value=item.state||'';f_stage.value=item.stage;f_fit.value=item.fit;f_interest.value=item.interest;f_available.value=item.available;f_next.value=item.next;f_due.value=item.due||"";f_tags.value=item.tags||"";f_notes.value=item.notes||"";m.showModal()}
    document.getElementById('saveBtn').addEventListener('click',e=>{e.preventDefault();const id=document.getElementById('f_id').value||uid();const obj={id,name:f_name.value.trim(),company:f_company.value.trim(),email:f_email.value.trim(),phone:f_phone.value.trim(),city:f_city.value.trim(),state:f_state.value.trim(),stage:f_stage.value,fit:+f_fit.value||0,interest:+f_interest.value||0,available:+f_available.value||0,next:f_next.value.trim(),due:f_due.value,tags:f_tags.value.trim(),notes:f_notes.value.trim(),updated:Date.now()};const ix=db.findIndex(x=>x.id===id);if(ix>-1)db[ix]=obj;else db.push(obj);saveInvestors();document.getElementById('modal').close()});
    function quickAdvance(id){const x=db.find(r=>r.id===id);if(!x)return;const idx=STAGES.indexOf(x.stage);x.stage=STAGES[Math.min(STAGES.length-1,idx+1)];x.updated=Date.now();saveInvestors()}

    // ---- Delete ----
    let pendingDelete={id:null,type:null};
    function confirmDel(id,type){pendingDelete={id,type};document.getElementById('confirmDlg').showModal()}
    document.getElementById('confirmYes').addEventListener('click',e=>{e.preventDefault();if(!pendingDelete.id){document.getElementById('confirmDlg').close();return;}if(pendingDelete.type==='investor'){db=db.filter(x=>x.id!==pendingDelete.id);saveInvestors();}pendingDelete={id:null,type:null};document.getElementById('confirmDlg').close()});

    // ---- Filters / Tabs ----
    ;['q','stageFilter','sorter'].forEach(id=>document.getElementById(id).addEventListener('input',renderInvestors));
    document.querySelectorAll('.tab[data-view]').forEach(btn=>btn.addEventListener('click',()=>{document.querySelectorAll('.tab[data-view]').forEach(b=>b.classList.remove('active'));btn.classList.add('active');const view=btn.dataset.view;document.getElementById('tableView').classList.toggle('hidden',view!=='table');document.getElementById('boardView').classList.toggle('hidden',view!=='board')}));
    document.getElementById('toggleViewBtn').addEventListener('click',()=>{const isTable=!document.getElementById('tableView').classList.contains('hidden');document.querySelector(`.tab[data-view="${isTable?'board':'table'}"]`).click()});

    // ---- CSV Import/Export ----
    document.getElementById('exportBtn').addEventListener('click',()=>{const headers=['id','name','company','email','phone','city','state','stage','fit','interest','available','next','due','tags','notes','updated'];const rows=[headers.join(',')].concat(db.map(o=>headers.map(h=>csvCell(o[h])).join(',')));const blob=new Blob([rows.join('\n')],{type:'text/csv'});const a=Object.assign(document.createElement('a'),{href:URL.createObjectURL(blob),download:'investors.csv'});document.body.appendChild(a);a.click();a.remove()});
    const fp=document.getElementById('filePicker');document.getElementById('importBtn').addEventListener('click',()=>fp.click());
    fp.addEventListener('change',async e=>{const file=e.target.files[0];if(!file)return;const text=await file.text();const lines=text.split(/\r?\n/).filter(Boolean);if(!lines.length)return;const headers=lines.shift().split(',').map(h=>h.trim());const idx=k=>headers.indexOf(k);for(const line of lines){const parts=splitCSV(line);const o={id:parts[idx('id')]||uid(),name:parts[idx('name')]||'',company:parts[idx('company')]||'',email:parts[idx('email')]||'',phone:parts[idx('phone')]||'',city:parts[idx('city')]||'',state:parts[idx('state')]||'',stage:parts[idx('stage')]||'Lead',fit:+parts[idx('fit')]||0,interest:+parts[idx('interest')]||0,available:+parts[idx('available')]||0,next:parts[idx('next')]||'',due:parts[idx('due')]||'',tags:parts[idx('tags')]||'',notes:parts[idx('notes')]||'',updated:+(parts[idx('updated')]||Date.now())};const i=db.findIndex(x=>x.id===o.id);if(i>-1)db[i]=o;else db.push(o);}saveInvestors();fp.value=''});

    // ---- Hydrate & Seed ----
    (function hydrate(){const stored=loadInvestors();if(Array.isArray(stored)&&stored.length>0){db=stored;renderInvestors();return;}if(db.length===0){db=[{id:uid(),name:'Jack Edma',company:'Grupo Ultracaribe',email:'jack@ultracaribe.com',phone:'+1 (809) 000-0000',city:'Santo Domingo',state:'DN',stage:'Diligence',fit:78,interest:300000,available:150000,next:'Send updated prospectus',due:'',tags:'real estate, trading',notes:'Wants export schedule; risk-averse',updated:Date.now()-86400000},{id:uid(),name:'Ken Yang',company:'Pacific Ventures',email:'ken@pacific.vc',phone:'',city:'San Francisco',state:'CA',stage:'Contacted',fit:70,interest:500000,available:0,next:'Book call',due:'',tags:'Asia, logistics',notes:'Interested in eel exports',updated:Date.now()-43200000},{id:uid(),name:'Annie Arvind',company:'MG Capital',email:'annie@mg.capital',phone:'',city:'Lynchburg',state:'VA',stage:'NDA',fit:82,interest:200000,available:50000,next:'Share data room',due:'',tags:'family office',notes:'Likes structured tranches',updated:Date.now()-86000},{id:uid(),name:'John Genesis',company:'Genesis Media',email:'john@gen.media',phone:'',city:'Chennai',state:'TN',stage:'Lead',fit:55,interest:100000,available:20000,next:'Intro lunch',due:'',tags:'media',notes:'Wants monthly guarantee',updated:Date.now()-32000}];saveInvestors();}})();

    // ---- Backup/Restore buttons ----
    document.getElementById('backupBtn').addEventListener('click',()=>{try{localStorage.setItem('mgcrm_investors_backup',JSON.stringify(db));alert('Backup saved in this browser.');}catch{alert('Could not save backup.')}});
    document.getElementById('restoreBtn').addEventListener('click',()=>{const snap=localStorage.getItem('mgcrm_investors_backup');if(!snap){alert('No backup found.');return;}try{db=JSON.parse(snap)||[];saveInvestors();alert('Restored from browser backup.');}catch{alert('Backup was unreadable.')}});
  </script>
</body>
</html>
